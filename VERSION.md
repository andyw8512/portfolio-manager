# 持仓整理工具 - 版本说明

## v1.1（当前版本）— 2025-02

- **用途**：在 v1.0 基础上的小版本，修复市场/行业记忆与 1 号产品合并逻辑，便于之后回滚对比。
- **主要变更**：市场列记忆修复；1 号产品合并同股票时保留 `marketOverride`/`exchange`，上次手动选的「市场」会正确带出；桌面 exe 启动器与说明。
- **包含**：与 v1.0 相同功能，外加上述修复与桌面启动方式。

---

## v1.0（稳定基线）— 2025-02

- **用途**：已跑通、可正常使用的版本，作为**回滚基线**。若 v1.1 或后续版本出问题，可退回此版本。
- **包含**：上传截图 → OCR（MiniMax / Gemini / OpenAI）→ 解析 GT/TRS → 汇总、行业分类可编辑、市场列（A股/港股/美股）、本地运行 `node server.js` 端口 3011。

---

## 如何回滚

### 回滚到 v1.1

- **Git**：`git checkout v1.1`（需先打标签：`git tag v1.1`）
- **备份**：若有 `portfolio-manager-v1.1` 副本，用其覆盖或拷贝需要的文件。

### 回滚到 v1.0

- **Git**：`git checkout v1.0`（需先打标签：`git tag v1.0`）
- **备份**：若有 `portfolio-manager-v1.0` 副本，用其覆盖或拷贝需要的文件。
- **单文件**：`git checkout v1.0 -- 持仓整理工具.html server.js`

### 打标签（建议在发布时各做一次）

```bash
# 当前代码已是 v1.1 时，提交并打 v1.1 标签
git add -A && git commit -m "release v1.1" && git tag v1.1

# 若尚未打过 v1.0，可先 checkout 到 v1.0 对应提交再：git tag v1.0
```

### 若不用 Git

- 将当前整个项目文件夹**复制一份**，命名为如 `portfolio-manager-v1.1`，单独保存。
- 保留一份 `portfolio-manager-v1.0` 作为基线副本；以后出问题时用对应副本覆盖或拷贝文件。

---

**建议**：新功能在单独分支或副本里开发，确认稳定后再合并；保留 v1.0 / v1.1 标签或备份便于随时回滚。
